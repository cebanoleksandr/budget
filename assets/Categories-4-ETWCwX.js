import{_ as d,m as f,o as r,c as o,d as t,n,t as a,h as g,e as v,u as E,F as _,p as y,f as b,q as $,i as C,r as u}from"./index-3X6NywY1.js";const T={data:()=>({title:"",limit:"",titleError:"",limitError:""}),methods:{changeTitle(e){this.title=e.target.value,this.validateTitle()},changeLimit(e){this.limit=e.target.value,this.validateLimit()},validateTitle(){this.title?this.titleError="":this.titleError="Title is require"},validateLimit(){const e=/^[1-9][0-9]*$/;this.limit?e.test(this.limit)?+this.limit<100?this.limitError="Minimum value must be 100":this.limitError="":this.limitError="It must be a number":this.limitError="Name is require"},reset(){this.title="",this.limit="",this.titleError="",this.limitError=""},submitHandler(){if(this.validateTitle(),this.validateLimit(),this.titleError||this.limitError)return;const e={title:this.title,limit:this.limit};f(this.$store.getters.user.id,e).then(i=>{console.log(i.data),this.$store.commit("addCategory",i.data),this.$store.commit("setMessage","Category is created successfuly"),setTimeout(()=>{this.$store.commit("clearMessage")},3e3)}).finally(()=>{this.reset()})}}},L={class:"column is-6"},N=t("h3",{class:"is-size-3"},"Create",-1),S={class:"field"},M=t("label",{class:"label"},"Name",-1),B={class:"control"},k=["value"],I={class:"help has-text-danger fix-height"},x={class:"field"},H=t("label",{class:"label"},"Limit",-1),q={class:"control"},z=["value"],V={class:"help has-text-danger fix-height"},w=t("div",{class:"control"},[t("button",{class:"button is-success"},[v(" Create   "),t("i",{class:"fa fa-paper-plane"})])],-1);function D(e,i,c,h,m,s){return r(),o("div",L,[N,t("form",{onSubmit:i[4]||(i[4]=g((...l)=>s.submitHandler&&s.submitHandler(...l),["prevent"]))},[t("div",S,[M,t("div",B,[t("input",{class:n(["input is-primary",{"is-danger":!!e.titleError}]),type:"text",placeholder:"Name...",value:e.title,onInput:i[0]||(i[0]=(...l)=>s.changeTitle&&s.changeTitle(...l)),onBlur:i[1]||(i[1]=l=>s.validateTitle())},null,42,k)]),t("p",I,a(e.titleError),1)]),t("div",x,[H,t("div",q,[t("input",{class:n(["input is-primary",{"is-danger":!!e.limitError}]),type:"text",placeholder:"Minimum value...",value:e.limit,onInput:i[2]||(i[2]=(...l)=>s.changeLimit&&s.changeLimit(...l)),onBlur:i[3]||(i[3]=l=>s.validateLimit())},null,42,z)]),t("p",V,a(e.limitError),1)]),w],32)])}const F=d(T,[["render",D]]),R={data:()=>({select:"",title:"",limit:"",titleError:"",limitError:"",selectError:""}),computed:{categories(){return this.$store.getters.getCategories}},methods:{changeTitle(e){this.title=e.target.value,this.validateTitle()},changeLimit(e){this.limit=e.target.value,this.validateLimit()},changeSelect(e){this.select=e.target.value;const i=this.categories.find(c=>c.id===this.select);i&&(this.title=i.title,this.limit=i.limit),this.validateSelect(),this.validateTitle(),this.validateLimit()},validateTitle(){this.title?this.titleError="":this.titleError="Title is require"},validateSelect(){this.select?this.selectError="":this.selectError="You must choose the category"},validateLimit(){const e=/^[1-9][0-9]*$/;this.limit?e.test(this.limit)?+this.limit<100?this.limitError="Minimum value must be 100":this.limitError="":this.limitError="It must be a number":this.limitError="Name is require"},reset(){this.title="",this.limit="",this.select="",this.titleError="",this.limitError="",this.selectError=""},submitHandler(){if(this.validateTitle(),this.validateLimit(),this.validateSelect(),this.titleError||this.limitError||this.selectError)return;const e={title:this.title,limit:this.limit};E(this.select,e).then(i=>{console.log("Updated",i.data),this.$store.commit("updateCategories",i.data),this.$store.commit("setMessage","Category is updated successfuly"),setTimeout(()=>{this.$store.commit("clearMessage")},3e3)}).finally(()=>{this.reset()})}}},U={class:"column is-6"},Y=t("h3",{class:"is-size-3"},"Edit",-1),j={class:"field"},A=t("label",{class:"label"},"Title",-1),G=["value"],J=t("option",{disabled:"",value:""},"Select category title",-1),K=["value"],O={class:"help has-text-danger fix-height"},P={class:"field"},Q=t("label",{class:"label"},"Name",-1),W={class:"control"},X=["value"],Z={class:"help has-text-danger fix-height"},tt={class:"field"},et=t("label",{class:"label"},"Limit",-1),it={class:"control"},st=["value"],lt={class:"help has-text-danger fix-height"},rt=t("div",{class:"control"},[t("button",{class:"button is-success"},[v(" Refresh   "),t("i",{class:"fa fa-paper-plane"})])],-1);function at(e,i,c,h,m,s){return r(),o("div",U,[Y,t("form",{onSubmit:i[5]||(i[5]=g((...l)=>s.submitHandler&&s.submitHandler(...l),["prevent"]))},[t("div",j,[A,t("div",{class:n(["select is-primary",{"is-danger":!!e.selectError}])},[t("select",{value:e.select,onInput:i[0]||(i[0]=(...l)=>s.changeSelect&&s.changeSelect(...l))},[J,(r(!0),o(_,null,y(s.categories,l=>(r(),o("option",{key:l.id,value:l.id},a(l.title),9,K))),128))],40,G)],2),t("p",O,a(e.selectError),1)]),t("div",P,[Q,t("div",W,[t("input",{class:n(["input is-primary",{"is-danger":!!e.titleError}]),type:"text",placeholder:"Name...",value:e.title,onInput:i[1]||(i[1]=(...l)=>s.changeTitle&&s.changeTitle(...l)),onBlur:i[2]||(i[2]=l=>s.validateTitle())},null,42,X)]),t("p",Z,a(e.titleError),1)]),t("div",tt,[et,t("div",it,[t("input",{class:n(["input is-primary",{"is-danger":!!e.limitError}]),type:"text",placeholder:"Minimum value...",value:e.limit,onInput:i[3]||(i[3]=(...l)=>s.changeLimit&&s.changeLimit(...l)),onBlur:i[4]||(i[4]=l=>s.validateLimit())},null,42,st)]),t("p",lt,a(e.limitError),1)]),rt],32)])}const ot=d(R,[["render",at]]),nt={name:"categories",components:{CategoryCreate:F,CategoryEdit:ot},computed:{message(){return this.$store.getters.message}}},ct=t("h2",{class:"is-size-2 mb-2"},"Categories",-1),dt=t("div",{class:"hr"},null,-1),ht={class:"section columns"},mt={key:1,class:"has-text-centered w100"},ut=t("h3",{class:"is-size-3"},"There are no categories yet",-1),gt=[ut],vt={key:0,class:"notification absolute is-success"},_t=t("button",{class:"delete"},null,-1);function pt(e,i,c,h,m,s){const l=u("CategoryCreate"),p=u("CategoryEdit");return r(),o(_,null,[ct,dt,t("div",ht,[b(l),this.$store.getters.getCategories.length?(r(),$(p,{key:0})):(r(),o("div",mt,gt))]),s.message?(r(),o("div",vt,[_t,t("strong",null,a(s.message),1)])):C("",!0)],64)}const Et=d(nt,[["render",pt]]);export{Et as default};
