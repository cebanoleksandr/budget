import{_ as p,L as y,I as f,c as l,d as r,t as c,q as b,e as d,f as C,w as k,F as m,p as v,r as h,o as i,J as x}from"./index-3X6NywY1.js";const A={name:"planning",data:()=>({loading:!0,currency:null}),components:{Loader:y},mounted(){f().then(e=>{console.log(e.data),this.currency=e.data,this.loading=!1})},computed:{categories(){return this.$store.getters.getCategories.map(e=>{const o=this.$store.getters.getRecords.filter(s=>s.categoryId===e.id).filter(s=>s.type==="outcome").reduce((s,a)=>s+=+a.amount,0),n=100*o/e.limit,u=n>100?100:n,g=n<60?"green":n<100?"yellow":"red";return{...e,progressPercent:u,progressColor:g,spend:o}})},bill(){return this.$store.getters.bill.bill},base(){var e,o;return this.$store.getters.bill.bill/(((e=this.currency)==null?void 0:e.rates.UAH)/((o=this.currency)==null?void 0:o.rates.EUR))}},methods:{getCurrency(e){var o;return(this.base*((o=this.currency)==null?void 0:o.rates[e])).toFixed(2)},formatCurrency(e){return typeof e=="number"?e.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,"):""}}},U={class:"columns"},w=r("div",{class:"column is-9"},[r("h2",{class:"is-size-2 mb-2"},"Planning")],-1),z={class:"column is-3 mt-2"},H={class:"is-size-3"},L=r("div",{class:"hr"},null,-1),B={key:1,class:"is-size-3 has-text-centered w100 mt-6"},F=["title"],P={class:"is-size-4"},$={class:"progress mb-5"};function E(e,o,n,u,g,s){const a=h("Loader"),_=h("router-link");return i(),l(m,null,[r("div",U,[w,r("div",z,[r("h4",H,c(s.getCurrency("UAH"))+" UAH",1)])]),L,e.loading?(i(),b(a,{key:0})):s.categories.length?(i(!0),l(m,{key:2},v(s.categories,t=>(i(),l("div",{class:"mt-4",key:t.id,title:t.spend>+t.limit?"Excess by "+(t.spend-+t.limit)+" UAH":+t.limit-t.spend+" UAH left"},[r("p",P,[r("strong",null,c(t.title)+": ",1),d(" "+c(s.formatCurrency(t.spend))+" from "+c(s.formatCurrency(+t.limit)),1)]),r("div",$,[r("div",{class:"determinate",style:x({width:t.progressPercent+"%",background:t.progressColor})},null,4)])],8,F))),128)):(i(),l("h3",B,[d(" There are no categories. Â  "),C(_,{to:"/categories"},{default:k(()=>[d("Add category")]),_:1})]))],64)}const V=p(A,[["render",E]]);export{V as default};
